(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=o(i);fetch(i.href,n)}})();let u=(e,t=500,o=0)=>{e.classList.contains("--slide")||(e.classList.add("--slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=`${e.offsetHeight}px`,e.offsetHeight,e.style.overflow="hidden",e.style.height=o?`${o}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.hidden=!o,o||e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),o||e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("--slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:e}}))},t))},f=(e,t=500,o=0)=>{if(!e.classList.contains("--slide")){e.classList.add("--slide"),e.hidden=e.hidden?!1:null,o&&e.style.removeProperty("height");let s=e.offsetHeight;e.style.overflow="hidden",e.style.height=o?`${o}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=s+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("--slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:e}}))},t)}},y=(e,t=500)=>e.hidden?f(e,t):u(e,t),a=!0,v=(e=500)=>{document.documentElement.hasAttribute("data-scrolllock")?p(e):h(e)},p=(e=500)=>{if(a){const t=document.querySelectorAll("[data-lp]");setTimeout(()=>{t.forEach(o=>{o.style.paddingRight=""}),document.body.style.paddingRight="",document.documentElement.removeAttribute("data-scrolllock")},e),a=!1,setTimeout(function(){a=!0},e)}},h=(e=500)=>{if(a){const t=document.querySelectorAll("[data-lp]"),o=window.innerWidth-document.body.offsetWidth+"px";t.forEach(s=>{s.style.paddingRight=o}),document.body.style.paddingRight=o,document.documentElement.setAttribute("data-scrolllock",""),a=!1,setTimeout(function(){a=!0},e)}};function w(e,t){const o=Array.from(e).filter(n=>n.dataset[t]).map(n=>{const[r,l="max"]=n.dataset[t].split(",");return{value:r,type:l,item:n}});if(o.length===0)return[];const s=o.map(({value:n,type:r})=>`(${r}-width: ${n}px),${n},${r}`);return[...new Set(s)].map(n=>{const[r,l,d]=n.split(","),m=window.matchMedia(r);return{itemsArray:o.filter(c=>c.value===l&&c.type===d),matchMedia:m}})}function g(){document.addEventListener("click",function(e){a&&e.target.closest("[data-menu]")&&(v(),document.documentElement.toggleAttribute("data-menu-open"))})}document.querySelector("[data-menu]")&&window.addEventListener("load",g);function L(){const e=document.querySelector(".menu__item--dropdown");if(!e)return;if(!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))e.addEventListener("mouseenter",()=>{e.classList.add("open")}),e.addEventListener("mouseleave",()=>{e.classList.remove("open")});else{const o=e.querySelector(".menu__link");o&&(o.addEventListener("click",function(s){s.preventDefault();const i=e.classList.contains("open");document.querySelectorAll(".menu__item--dropdown.open").forEach(n=>{n!==e&&n.classList.remove("open")}),i?e.classList.remove("open"):e.classList.add("open")}),document.addEventListener("click",function(s){e.contains(s.target)||e.classList.remove("open")}))}}window.addEventListener("DOMContentLoaded",L);function E(){const e=document.querySelector("[data-header-scroll]"),t=e.hasAttribute("data-header-scroll-show"),o=e.dataset.flsHeaderScrollShow?e.dataset.flsHeaderScrollShow:500,s=e.dataset.flsHeaderScroll?e.dataset.flsHeaderScroll:1;let i=0,n;document.addEventListener("scroll",function(r){const l=window.scrollY;clearTimeout(n),l>=s?(e.classList.contains("--header-scroll")||e.classList.add("--header-scroll"),t&&(l>i?e.classList.contains("--header-show")&&e.classList.remove("--header-show"):e.classList.contains("--header-show")||e.classList.add("--header-show"),n=setTimeout(()=>{e.classList.contains("--header-show")||e.classList.add("--header-show")},o))):(e.classList.contains("--header-scroll")&&e.classList.remove("--header-scroll"),t&&e.classList.contains("--header-show")&&e.classList.remove("--header-show")),i=l<=0?0:l})}document.querySelector("[data-header-scroll]")&&window.addEventListener("load",E);class b{constructor(t=".popup"){if(this.popup=document.querySelector(t),this.forms=document.querySelectorAll("form"),!this.popup){console.error(`Popup with selector "${t}" not found`);return}this.init()}init(){this.setupPopup(),this.bindFormsEvents()}setupPopup(){this.popup.setAttribute("aria-hidden","true"),this.popup.setAttribute("role","dialog"),this.popup.setAttribute("aria-modal","true"),this.bindPopupEvents()}bindFormsEvents(){this.forms.forEach(t=>{t.addEventListener("submit",o=>this.handleFormSubmit(o,t))})}bindPopupEvents(){const t=this.popup.querySelector("[data-popup-close]");t&&t.addEventListener("click",()=>this.closePopup()),this.popup.addEventListener("click",o=>{o.target===this.popup&&this.closePopup()}),document.addEventListener("keydown",o=>{o.key==="Escape"&&this.isPopupOpen()&&this.closePopup()})}handleFormSubmit(t,o){t.preventDefault(),this.clearFormErrors(o);const s=o.querySelectorAll("[required]");this.validateRequiredFields(s)&&(this.showPopup(),o.reset())}validateRequiredFields(t){let o=!0;return t.forEach(s=>{this.getFieldValue(s)?this.clearFieldError(s):(this.showFieldError(s),o=!1)}),o}getFieldValue(t){switch(t.type){case"checkbox":case"radio":return t.checked;case"select-one":case"select-multiple":return t.value&&t.value!=="";default:return t.value&&t.value.trim()!==""}}showFieldError(t){t.classList.add("error"),t.setAttribute("aria-invalid","true")}clearFieldError(t){t.classList.remove("error"),t.removeAttribute("aria-invalid")}clearFormErrors(t){t.querySelectorAll(".error").forEach(s=>this.clearFieldError(s))}showPopup(){document.documentElement.classList.add("popup-show"),this.popup.classList.add("popup_show"),this.popup.setAttribute("aria-hidden","false"),this.focusFirstElement(),document.body.style.overflow="hidden"}closePopup(){this.popup.classList.remove("popup_show"),document.documentElement.classList.remove("popup-show"),this.popup.setAttribute("aria-hidden","true"),document.body.style.overflow=""}isPopupOpen(){return this.popup.classList.contains("popup_show")}focusFirstElement(){const t=this.popup.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t.length>0&&t[0].focus()}}document.addEventListener("DOMContentLoaded",function(){new b(".popup")});class S{constructor(t={}){this.options={headerSelector:"header.header",headerScrollClass:"--header-scroll",menuOpenAttribute:"data-menu-open",scrollSpeed:500,offsetTop:0,homePage:"/",...t},this.init()}init(){this.bindEvents(),this.handlePageLoad()}bindEvents(){document.addEventListener("click",t=>this.handleNavigationClick(t)),document.addEventListener("watcherCallback",t=>this.handleWatcherCallback(t))}handleNavigationClick(t){const s=t.target.closest("[data-scrollto]");if(!s)return;t.preventDefault();const i=this.getSelector(s),n=s.dataset.scrolltoPage||this.options.homePage,r=s.hasAttribute("data-scrollto-header"),l=parseInt(s.dataset.scrolltoSpeed)||this.options.scrollSpeed,d=parseInt(s.dataset.scrolltoTop)||this.options.offsetTop;if(!i){console.warn("UniversalNavigation: Empty selector provided",s);return}this.closeMenu(),this.isCurrentPage(n)?this.scrollToSection(i,r,l,d):this.navigateToPageWithSection(n,i)}handleWatcherCallback(t){if(!t.detail)return;const o=t.detail.entry,s=o.target;if(s.dataset.flsWatcher!=="navigator")return;let i=null;if(s.id)i=document.querySelector(`[data-scrollto="#${s.id}"]`);else if(s.classList.length)for(const n of s.classList){const r=document.querySelector(`[data-scrollto=".${n}"]`);if(r){i=r;break}}i&&(o.isIntersecting?i.classList.add("--navigator-active"):i.classList.remove("--navigator-active"))}handlePageLoad(){const t=this.getHash();t&&setTimeout(()=>{let o=null;document.querySelector(`#${t}`)?o=`#${t}`:document.querySelector(`.${t}`)&&(o=`.${t}`),o&&this.scrollToSection(o,!1,this.options.scrollSpeed,this.options.offsetTop)},100)}getSelector(t){var o;return t.dataset.scrollto||t.dataset.flsScrollto||((o=t.getAttribute("href"))==null?void 0:o.replace("#","#"))||""}isCurrentPage(t){const o=window.location.pathname,s=new URL(t,window.location.origin).pathname;return o===s}navigateToPageWithSection(t,o){const s=o.replace(/^[#.]/,""),i=`${t}#${s}`;sessionStorage.setItem("scrollToSection",JSON.stringify({selector:o,timestamp:Date.now()})),window.location.href=i}scrollToSection(t,o=!1,s=500,i=0){const n=document.querySelector(t);if(!n){console.warn(`UniversalNavigation: Element with selector "${t}" not found`);return}let r=0;o&&(r=this.getHeaderHeight());let l=n.getBoundingClientRect().top+window.pageYOffset;l=r?l-r:l,l=i?l-i:l,window.scrollTo({top:l,behavior:"smooth"}),console.log(`UniversalNavigation: Scrolled to ${t}`)}getHeaderHeight(){const t=document.querySelector(this.options.headerSelector);if(!t)return 0;if(t.classList.contains(this.options.headerScrollClass))return t.offsetHeight;t.style.cssText="transition-duration: 0s;",t.classList.add(this.options.headerScrollClass);const o=t.offsetHeight;return t.classList.remove(this.options.headerScrollClass),setTimeout(()=>{t.style.cssText=""},0),o}closeMenu(){document.documentElement.hasAttribute(this.options.menuOpenAttribute)&&(typeof bodyUnlock=="function"&&bodyUnlock(),document.documentElement.removeAttribute(this.options.menuOpenAttribute))}getHash(){return window.location.hash.replace("#","")}}document.addEventListener("DOMContentLoaded",function(){window.universalNavigation=new S({homePage:"/",headerSelector:"header.header",scrollSpeed:800,offsetTop:20})});export{u as a,a as b,h as c,w as d,p as e,y as s};
